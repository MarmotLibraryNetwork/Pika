VuFind.Record=function(){return{showPlaceHold:function(module,id){VuFind.Account.ajaxLogin(function(){var source,volume=null;if(id.indexOf(":")>0){var idParts=id.split(":");source=idParts[0];id=idParts[1];if(idParts.length>2){volume=idParts[2]}}else{source="ils"}var url="/"+module+"/"+id+"/AJAX?method=getPlaceHoldForm&recordSource="+source;if(volume!=null){url+="&volume="+volume}$.getJSON(url,function(data){VuFind.showMessageWithButtons(data.title,data.modalBody,data.modalButtons)}).fail(VuFind.ajaxFail)});return false},showPlaceHoldEditions:function(module,id){VuFind.Account.ajaxLogin(function(){var source,volume=null;if(id.indexOf(":")>0){var idParts=id.split(":");source=idParts[0];id=idParts[1];if(idParts.length>2){volume=idParts[2]}}else{source="ils"}var url="/"+module+"/"+id+"/AJAX?method=getPlaceHoldEditionsForm&recordSource="+source;if(volume!=null){url+="&volume="+volume}$.getJSON(url,function(data){VuFind.showMessageWithButtons(data.title,data.modalBody,data.modalButtons)}).fail(VuFind.ajaxFail)});return false},showBookMaterial:function(module,id){VuFind.Account.ajaxLogin(function(){VuFind.loadingMessage();if(id.indexOf(":")>0){var idParts=id.split(":",2);id=idParts[1]}$.getJSON("/"+module+"/"+id+"/AJAX?method=getBookMaterialForm",function(data){VuFind.showMessageWithButtons(data.title,data.modalBody,data.modalButtons)}).fail(VuFind.ajaxFail)});return false},submitBookMaterialForm:function(){var params=$("#bookMaterialForm").serialize()+"&method=bookMaterial",module=$("#module").val();VuFind.showMessage("Scheduling","Processing, please wait.");$.getJSON("/"+module+"/AJAX",params,function(data){if(data.modalBody)VuFind.showMessageWithButtons(data.title,data.modalBody,data.modalButtons);if(data.success)VuFind.showMessageWithButtons("Success",data.message,data.buttons);else if(data.message)VuFind.showMessage("Error",data.message)}).fail(VuFind.ajaxFail)},submitHoldForm:function(){var id=$("#id").val(),autoLogOut=$("#autologout").prop("checked"),selectedItem=$("#selectedItem"),module=$("#module").val(),volume=$("#volume"),params={method:"placeHold",campus:$("#campus").val(),selectedUser:$("#user").val(),canceldate:$("#canceldate").val(),recordSource:$("#recordSource").val(),account:$("#account").val()};if(autoLogOut){params["autologout"]=true}if(selectedItem.length>0){params["selectedItem"]=selectedItem.val()}if(volume.length>0){params["volume"]=volume.val()}if(params["campus"]=="undefined"){alert("Please select a location to pick up your hold when it is ready.");return false}VuFind.showMessageWithButtons($("#myModalLabel").html(),"Loading, please wait.",$(".modal-buttons").html());$.getJSON("/"+module+"/"+id+"/AJAX",params,function(data){if(data.success){if(data.needsItemLevelHold){$(".modal-body").html(data.message)}else{VuFind.showMessageWithButtons("Hold Placed Successfully",data.message,data.buttons)}}else{VuFind.showMessage("Hold Failed",data.message,false,autoLogOut)}}).fail(VuFind.ajaxFail)},reloadCover:function(module,id){var url="/"+module+"/"+id+"/AJAX?method=reloadCover";$.getJSON(url,function(data){VuFind.showMessage("Success",data.message,true,true)}).fail(VuFind.ajaxFail);return false},forceReExtract:function(module,id){var url="/"+module+"/"+id+"/AJAX?method=forceReExtract";$.getJSON(url,function(data){VuFind.showMessage(data.success?"Success":"Error",data.message,data.success,data.success)}).fail(VuFind.ajaxFail);return false},moreContributors:function(){document.getElementById("showAdditionalContributorsLink").style.display="none";document.getElementById("additionalContributors").style.display="block"},lessContributors:function(){document.getElementById("showAdditionalContributorsLink").style.display="block";document.getElementById("additionalContributors").style.display="none"}}}(VuFind.Record||{});